---
import '../styles/components/safety-strength.css';
import { getLangFromUrl, useTranslations } from '../i18n/index';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const { image = '/images/products/lift-sliding-doors/details/glass-options.webp', imageAlt = 'Premium Glass Solution' } = Astro.props;
---

<section class="glass-section">
  <div class="section-wrap">
    <div class="glass-grid">
      <div class="visual-side js-reveal">
        <div class="main-image-wrapper">
          <img src={image} alt={imageAlt} class="glass-photo" />
          <div class="glass-label-badge">{t('safetyStrength.glassLabel')}</div>
        </div>
      </div>

      <div class="content-side js-reveal">
        <div class="content-inner">
          <span class="eyebrow">{t('safetyStrength.eyebrow')}</span>
          <h2 class="title">{t('safetyStrength.title')}</h2>
          <div class="accent-line"></div>

          <p class="lead-text" set:html={t('safetyStrength.leadText')}></p>

          <div class="features-stack">
            <div class="feature-card">
              <div class="icon-holder">
                <!-- icon -->
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M6 16.326c2.28.51 5.845.674 6 .674.155 0 3.72-.163 6-.674V7L12 4 6 7v9.326Z"/>
                  <path d="M12 8v5"/>
                  <path d="M10 10.5h4"/>
                </svg>
              </div>
              <div class="feature-text">
                <h3>{t('safetyStrength.temperedTitle')}</h3>
                <p>{t('safetyStrength.temperedDesc')}</p>
              </div>
            </div>

            <div class="feature-card">
              <div class="icon-holder">
                <!-- icon -->
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
              </div>
              <div class="feature-text">
                <h3>{t('safetyStrength.securityTitle')}</h3>
                <p>{t('safetyStrength.securityDesc')}</p>
              </div>
            </div>
          </div>

          <div class="action-row">
            <a href="#" onclick="event.preventDefault(); document.querySelector('footer').scrollIntoView({behavior: 'smooth', block: 'start'}); " class="cta-button primary">{t('safetyStrength.learnMore')}</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<script>
// @ts-nocheck
(function () {
  const run = () => {
    if (!window.__revealObserver) {
      window.__revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(ent => { if (ent.isIntersecting) ent.target.classList.add('in-view'); });
      }, { threshold: 0.15 });
    }
    const root = document.currentScript?.parentElement || document;
    root.querySelectorAll('.js-reveal').forEach(el => window.__revealObserver.observe(el));
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', run);
  } else run();
})();
</script>