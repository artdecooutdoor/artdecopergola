---
import Layout from '../../../layouts/layout.astro';
import { getLangFromUrl, useTranslations } from '../../../i18n/index';
import Hero from '../../../components/hero.astro';
import TechnicalInformation from '../../../components/technical-information.astro';
import ColorOptions from '../../../components/coloroptions.astro';
import Button from '../../../components/button.astro';
import '../../../styles/pages/products/sun-room-systems.css';
import '../../../styles/components/technical-information.css';
import '../../../styles/components/button.css';

// @ts-ignore
export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'ru' } },
    { params: { lang: 'az' } },
  ];
}

// @ts-ignore
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Technical Information Component Data
const technicalData = {
  title: t('sunRoomSystems.technicalTitle'),
  description: t('sunRoomSystems.technicalDesc'),
  diagramUrl: "/images/products/sun-room-systems/RAL90162.webp",
  features: [
    { 
      title: t('sunRoomSystems.heaterTitle'), 
      desc: t('sunRoomSystems.heaterDesc')
    },
    { 
      title: t('sunRoomSystems.fanTitle'), 
      desc: t('sunRoomSystems.fanDesc')
    },
    { 
      title: t('sunRoomSystems.lightTitle'), 
      desc: t('sunRoomSystems.lightDesc')
    }
  ],
  components: [
    { id: 1, name: "Support Post", img: "/images/products/sun-room-systems/details/support-post.webp", x: 42, y: 48.5 },
    { id: 2, name: "Rafter Hub", img: "/images/products/sun-room-systems/details/rafter-hub.webp", x: 89, y: 37 },
    { id: 3, name: "Curved Eave", img: "/images/products/sun-room-systems/details/curved-eave-profile.webp", x: 24, y: 43.5 },
  ]
};
---

<Layout title={t('sunRoomSystems.title')}>
	<main>
				<!-- HERO SECTION -->
		<Hero 
			title={t('sunRoomSystems.heroTitle')}
			description={[
				t('sunRoomSystems.heroDesc1'),
				t('sunRoomSystems.heroDesc2')
			]}
			image="/images/products/sun-room-systems.webp"
			imageAlt="Sun Room Systems showcase"
			buttonText={t('sunRoomSystems.orderNow')}
			buttonHref={`/${lang}/contact`}
			buttonVariant="premium"
		/>
		<!-- Technical Information Component -->
		<TechnicalInformation 
			title={technicalData.title}
			description={technicalData.description}
			diagramUrl={technicalData.diagramUrl}
			features={technicalData.features}
			components={technicalData.components}
		/>

		<!-- IDEAS FOR YOUR SUN ROOM SECTION -->
		<section class="section-models" id="models-section">
			<div class="section-wrap">
				<div class="models-grid">
					<!-- Left Column -->
					<div class="models-info" id="info-animate">
						<h1 class="models-hero-title" set:html={t('sunRoomSystems.ideasTitle')}></h1>
						
						<div class="ideas-list">
							<div class="idea-item">
								<h3>{t('sunRoomSystems.idea1Title')}</h3>
								<p>{t('sunRoomSystems.idea1Desc')}</p>
							</div>
							<div class="idea-item">
								<h3>{t('sunRoomSystems.idea2Title')}</h3>
								<p>{t('sunRoomSystems.idea2Desc')}</p>
							</div>
							<div class="idea-item">
								<h3>{t('sunRoomSystems.idea3Title')}</h3>
								<p>{t('sunRoomSystems.idea3Desc')}</p>
							</div>
							<div class="idea-item">
								<h3>{t('sunRoomSystems.idea4Title')}</h3>
								<p>{t('sunRoomSystems.idea4Desc')}</p>
							</div>
							<div class="idea-item">
								<h3>{t('sunRoomSystems.idea5Title')}</h3>
								<p>{t('sunRoomSystems.idea5Desc')}</p>
							</div>
						</div>
					<Button variant="cta" text={t('sunRoomSystems.orderNow')} href="#" onclick="event.preventDefault(); document.querySelector('footer').scrollIntoView({behavior: 'smooth', block: 'start'}); " />
				</div>

				<!-- Right Column -->
				<div class="models-visual" id="visual-animate">
						<div class="visual-box">
							<img src="/images/products/sun-room-systems/RAL90163.webp" alt="Sun Room Model Showcase" />
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Color Options Component -->
		<ColorOptions 
			images={{
				'9016': '/images/products/sun-room-systems/RAL9016.webp',
				'1013': '/images/products/sun-room-systems/RAL1013.webp',
				'8014': '/images/products/sun-room-systems/RAL8014.webp',
				'8019': '/images/products/sun-room-systems/RAL8019.webp',
				'9005': '/images/products/sun-room-systems/RAL9005.webp',
				'7016': '/images/products/sun-room-systems/RAL7016.webp'
			}}
		/>
	</main>
</Layout>

<script>
	// @ts-nocheck
	// Simple Intersection Observer for animations on scroll
	function initModelsObserver() {
		const observer = new IntersectionObserver((entries) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					entry.target.classList.add('in-view');
				}
			});
		}, { threshold: 0.1 });

		const targets = [
			document.getElementById('info-animate'),
			document.getElementById('visual-animate')
		];

		targets.forEach(el => {
			if (el) observer.observe(el);
		});
	}

	window.addEventListener('DOMContentLoaded', initModelsObserver);
</script>